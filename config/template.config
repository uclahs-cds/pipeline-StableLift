// EXECUTION SETTINGS AND GLOBAL DEFAULTS

// External config files import. DO NOT MODIFY THESE LINES!
includeConfig "${projectDir}/config/default.config"
includeConfig "${projectDir}/config/methods.config"
includeConfig "${projectDir}/nextflow.config"

// Inputs/parameters of the pipeline
params {
    // Output location
    output_dir = ""

    // Choices: ["HaplotypeCaller", "Mutect2", "Strelka2", "SomaticSniper", "Muse2", "Delly2-gSV", "Delly2-sSV"]
    variant_caller = ""

    // Choices: ["GRCh37ToGRCh38", "GRCh38ToGRCh37"]
    liftover_direction = ""

    // Path to pre-trained random forest model
    rf_model = ""

    // Path to reference fasta files
    fasta_ref_37 = "" // GRCh37-EBI-hs37d5/hs37d5.fa
    fasta_ref_38 = "" // GRCh38-BI-20160721/Homo_sapiens_assembly38.fasta

    // Path to unpacked resource-bundle.zip
    resource_bundle_path = ""

    // Optional parameter specifying target Stability Score threshold for variant filtering
    // Default behavior without `target_threshold` or `target_specificity` uses threshold maximizing F1-score in whole genome validation set
    // Must be in the range [0.0, 1.0]
    // target_threshold = 0.5

    // Optional parameter specifying target specificity for variant filtering based on whole genome validation set
    // Overrides `target_threshold`
    // Must be in the range [0.0, 1.0]
    // target_specificity = 0.95

    // Optional parameter specifying number of cpus to use for parsing large VCFs
    // Defaults to 4 if unset
    // extract_features_cpus = 4

    // LiftOver chain file
    chain_file = liftover_direction == "GRCh37ToGRCh38" ? 
        "${resource_bundle_path}/hg19ToHg38.over.chain" : 
        "${resource_bundle_path}/hg38ToHg19.over.chain"

    // SNV required references
    funcotator_data_source = "${resource_bundle_path}/funcotator_dataSources.v1.7.20200521s_StableLift"
    repeat_bed = liftover_direction == "GRCh37ToGRCh38" ? 
        "${resource_bundle_path}/GRCh38_RepeatMasker-intervals.bed" : 
        "${resource_bundle_path}/GRCh37_RepeatMasker-intervals.bed"

    // SV required references
    gnomad_rds = "${resource_bundle_path}/gnomad.v4.0.sv.Rds"
    header_contigs = liftover_direction == "GRCh37ToGRCh38" ? 
        "${resource_bundle_path}/GRCh38_VCF-header-contigs.txt" : 
        "${resource_bundle_path}/GRCh37_VCF-header-contigs.txt"
}

// Setup the pipeline config. DO NOT REMOVE THIS LINE!
methods.setup()
